#+TITLE: My configuration of Emacs
#+STARTUP: showeverything
#+STARTUP: inlineimages
#+AUTHOR: Prutserdt

#+CAPTION: Doom Emacs
#+ATTR_HTML: :alt Doom Emacs :title Doom Emacs :align left
[[https://github.com/Prutserdt/dotfiles/raw/master/.doom.d/doom-emacs.png]]

* /home/icefly/.doom.d/Table Of Contents :toc:
- [[#about-this-config][About this config]]
- [[#initel][init.el]]
- [[#packagesel][packages.el]]
- [[#configel][config.el]]
- [[#credits][Credits]]

* About this config
This is my personal [[https://github.com/hlissner/doom-emacs][Doom Emacs]] config. Nothing much to see here. Just started this journey and learning [[https://www.gnu.org/software/emacs/][Emacs]] and [[https://en.wikipedia.org/wiki/Literate_programming][literate programming]] along the way. The Emacs Lisp files [[https://github.com/Prutserdt/dotfiles/blob/master/.doom.d/init.el][init.el]], [[https://github.com/Prutserdt/dotfiles/blob/master/.doom.d/packages.el][packages.el]] and [[https://github.com/Prutserdt/dotfiles/blob/master/.doom.d/config.el][config.el]] are generated from [[https://github.com/Prutserdt/dotfiles/blob/master/.doom.d/README.org][this README.org file]] by tangling in Emacs (Alt-x and typing: =org-babel-tangle=). Remember to run =doom sync= in the terminal after modifying it! (or M-x doom-reload, or SPC h r r within emacs)

* init.el
This file controls what Doom modules are enabled and what order they load in. Remember to tangle this README.org file and running =doom sync= after modifying it! I made small modifications from the default Doom Emacs settings as adding Python and lsp.

#+begin_src emacs-lisp :tangle init.el
;;; init.el -*- lexical-binding: t; -*-

;; NOTE This file is generated from the README.org file. Do not alter this
;; init.el directly and only modify the REAME.org file then Alt-x and type:
;; 'org-babel-tangle' in emacs and run 'doom sync' in the terminal.
;; Happy hacking :-)

(doom! :completion
       company           ; the ultimate code completion backend
       vertico           ; the search engine of the future
       :ui
       doom              ; what makes DOOM look the way it does
       doom-dashboard    ; a nifty splash screen for Emacs
       doom-quit         ; DOOM quit-message prompts when you quit Emacs
       (emoji +unicode)  ; ð
       hl-todo           ; highlight TODO/FIXME/NOTE/DEPRECATED/HACK/REVIEW
       modeline          ; snazzy, Atom-inspired modeline, plus API
       ophints           ; highlight the region an operation acts on
       (popup +defaults)   ; tame sudden yet inevitable temporary windows
       vc-gutter         ; vcs diff in the fringe
       vi-tilde-fringe   ; fringe tildes to mark beyond EOB
       workspaces        ; tab emulation, persistence & separate workspaces
       :editor
       (evil +everywhere); come to the dark side, we have cookies
       file-templates    ; auto-snippets for empty files
       fold              ; (nigh) universal code folding
       snippets          ; my elves. They type so I don't have to
       :emacs
       dired             ; making dired pretty [functional]
       electric          ; smarter, keyword-based electric-indent
       undo              ; persistent, smarter undo for your inevitable mistakes
       vc                ; version-control and :Emacs, sitting in a tree
       :checkers
       syntax            ; tasing you for every semicolon you forget
       :tools
       (eval +overlay)   ; run code, run (also, repls)
       lookup            ; navigate your code and its documentation
       lsp               ; M-x vscode
       magit             ; a git porcelain for Emacs
       :lang
       emacs-lisp        ; drown in parentheses
       markdown          ; writing docs for people to ignore
       (org +pretty)     ; organize your plain life in plain text
       (python +lsp
        +pyright)        ; beautiful is better than ugly
       sh                ; she sells {ba,z,fi}sh shells on the C xor
       :email
       (mu4e +org +gmail); TODO: this is not set up yet....
       :app
       :config
       (default +bindings +smartparens)

       )
;; TODO: I want to add python to the default sourceblock (insert, <p TAB)
;;       Doesn't work properly. It is part of the list but <p tab doesn't work in org mode...
#+end_src

The folowing could be added to the init.el part that is listed above. Just copy/paste the section and uncomment it.

#+begin_src emacs-lisp

       ;; :completion
       ;;helm              ; the *other* search engine for love and life
       ;;ido               ; the other *other* search engine...
       ;;ivy               ; a search engine for love and life

       ;; :lang
       ;;julia             ; a better, faster MATLAB
       ;;kotlin            ; a better, slicker Java(Script)
       ;;latex             ; writing papers in Emacs has never been so fun
       ;;lean              ; for folks with too much to prove
       ;;ledger            ; be audit you can be
       ;;lua               ; one-based indices? one-based indices
       ;;erlang            ; an elegant language for a more civilized age
       ;;ess               ; emacs speaks statistics
       ;;factor
       ;;faust             ; dsp, but you get to keep your soul
       ;;fortran           ; in FORTRAN, GOD is REAL (unless declared INTEGER)
       ;;fsharp            ; ML stands for Microsoft's Language
       ;;fstar             ; (dependent) types and (monadic) effects and Z3
       ;;gdscript          ; the language you waited for
       ;;(go +lsp)         ; the hipster dialect
       ;;(haskell +lsp)    ; a language that's lazier than I am
       ;;hy                ; readability of scheme w/ speed of python
       ;;idris             ; a language you can depend on
       ;;json              ; At least it ain't XML
       ;;(java +lsp)       ; the poster child for carpal tunnel syndrome
       ;;javascript        ; all(hope(abandon(ye(who(enter(here))))))
       ;;nim               ; python + lisp at the speed of c
       ;;nix               ; I hereby declare "nix geht mehr!"
       ;;ocaml             ; an objective camel
       ;;php               ; perl's insecure younger brother
       ;;plantuml          ; diagrams for confusing people more
       ;;purescript        ; javascript, but functional
       ;;qt                ; the 'cutest' gui framework ever
       ;;racket            ; a DSL for DSLs
       ;;raku              ; the artist formerly known as perl6
       ;;rest              ; Emacs as a REST client
       ;;rst               ; ReST in peace
       ;;(ruby +rails)     ; 1.step {|i| p "Ruby is #{i.even? ? 'love' : 'life'}"}
       ;;rust              ; Fe2O3.unwrap().unwrap().unwrap().unwrap()
       ;;scala             ; java, but good
       ;;(scheme +guile)   ; a fully conniving family of lisps
       ;;sml
       ;;solidity          ; do you need a blockchain? No.
       ;;swift             ; who asked for emoji variables?
       ;;terra             ; Earth and Moon in alignment for performance.
       ;;web               ; the tubes
       ;;yaml              ; JSON, but readable
       ;;zig               ; C, but simpler

       ;; :email
       ;;(mu4e +org +gmail)
       ;;notmuch
       ;;(wanderlust +gmail)

       ;; :app
       ;;calendar
       ;;emms
       ;;everywhere        ; *leave* Emacs!? You must be joking
       ;;irc               ; how neckbeards socialize
       ;;(rss +org)        ; emacs as an RSS reader
       ;;twitter           ; twitter client https://twitter.com/vnought

       ;; :os
       ;;(:if IS-MAC macos)  ; improve compatibility with macOS

       ;; :config
       ;;literate

#+end_src

* packages.el
Here the packages are defined which should be installed. This is an addition to the already installed and loaded modules of init.el.

#+begin_src emacs-lisp :tangle packages.el

;; -*- no-byte-compile: t; -*-

;; NOTE This file is generated from the README.org file. Do not alter this
;; packages.el directly and only modify the REAME.org file then Alt-x and type:
;; 'org-babel-tangle' in emacs and run 'doom sync' in the terminal. Happy hacking :-)

(require 'package)
(add-to-list 'package-archives
             '("melpa" . "https://melpa.org/packages/"))
(package-refresh-contents)
(package-initialize)

;; Disable the nose package, because is not maintained and giving :lang python error
(package! nose :disable t)

;; To install SOME-PACKAGE from MELPA, ELPA or emacsmirror:
(package! mu4e)
;; FIXME: ik wil dat bij column 80 een grijze lijn komt te staan
;;       hetzelfde als ik in Vim heb staan (colorcolumn 80)
;;(package! column-marker)
;;(require 'column-marker)

;; Help finding the cursor
(package! beacon)

#+end_src

* config.el
Thee custom configurations are set here. For instance theme settings, image to the doom splash screen, transparency, relative numbering and email settings.
, which resets the current selected line to zero and adding an image to the splash screen.

#+begin_src emacs-lisp :tangle config.el

;; NOTE This file is generated from the README.org file. Do not alter this
;; config.el directly and only modify the REAME.org file, then Alt-x and type:
;; 'org-babel-tangle' in emacs and run 'doom sync' in the terminal.
;; Happy hacking :-)

;; Evil Mode
(use-package evil
  :ensure t
  :config
)

;; Style of line numbering, set to `relative' for relative number.
;; Or keycord: SPC t l, or SPC u SPC t l
;; FIXME: dit werkt niet na een reboot. vreemd...
;;(setq display-line-numbers-mode `relative)
;;(setq display-line-numbers-mode relative)
;;(setq doom-line-numbers-style 'relative)
;;(setq doom-line-numbers-style 'relative)
;;(setq display-line-numbers-mode)
(global-display-line-numbers-mode)
(setq display-line-numbers-type 'relative)

;; Restoring old Y behavior of VIM (yank the whole line)
(setq! evil-want-Y-yank-to-eol nil)

;; Make the normal/insert/visual states more apparent by changing cursor:
(setq evil-normal-state-cursor '(box "tomato")
      evil-insert-state-cursor '(bar "white")
      evil-visual-state-cursor '(hollow "orange"))

;; Nice bullets instead of boring *. Requires (org +pretty)
(setq     org-superstar-headline-bullets-list '("◉" "○" "✿" "✸" "⁖" ))

;; FIXME: ik wil een ander font instellen. Hack font geeft problemen
;; LIJKT het. Na een reboot is de tekst onleesbaar klein wat DENK
;; ik komt door onderstaande fontinstelling. Even kijken hoe ik dit
;; ga oplossen...
;;(set-frame-font "Hack 12" nil t)

;; Add closing parenthesis of [{"'
(show-paren-mode 1)

;; Add this image to my splash screen
(setq fancy-splash-image "~/.doom.d/doom-emacs.png")

;; Change the theme (other pleasing ones: moonlight,)
;;(setq doom-theme 'doom-moonlight)
;;(setq doom-theme 'doom-vibrant)
;;(setq doom-theme 'doom-material-dark)
;;(setq doom-theme 'doom-acario-dark) ;; donker, hoog contrast
(setq doom-theme 'doom-xcode)

;; Transparency... werkt niet..!!
(set-frame-parameter (selected-frame) 'alpha '(95 90))
(add-to-list 'default-frame-alist '(alpha 95 90))

;; FIXME: ik wil dat flash highligting langer duurd, bijv 1 sec
;;(setq hl-line-mode  5)

;; Help to find the cursor by beacon blink
(setq beacon-mode 1)
(setq beacon-blink-duration 3)

;; use mu4e for e-mail in emacs
(setq mail-user-agent 'mu4e-user-agent)
(set-email-account!
 "transip"
 '((mu4e-sent-folder       . "/transip/Sent Mail")
   (mu4e-trash-folder      . "/transip/Bin")
   (smtpmail-smtp-user     . "walter@elffrink.nl"))
 t)
(setq mu4e-get-mail-command "mbsync transip"
      ;; get emails and index every 5 minutes
      mu4e-update-interval 300
	  ;; send emails with format=flowed
	  mu4e-compose-format-flowed t
	  ;; no need to run cleanup after indexing for gmail
	  mu4e-index-cleanup nil
	  mu4e-index-lazy-check t
      ;; more sensible date format
      mu4e-headers-date-format "%d.%m.%y")
;; FIXME: smtpmail werkt nog niet, onderstaande verbeteren....
;; tell message-mode how to send mail
(setq message-send-mail-function 'smtpmail-send-it)
;; if our mail server lives at smtp.example.org; if you have a local
;; mail-server, simply use 'localhost' here.
(setq smtpmail-smtp-server "smtp.transip.email")

#+end_src

* Credits
My configuration of Doom Emacs is partially based on these ones.
- :book: https://gitlab.com/zzamboni/dot-doom
- :book: https://gitlab.com/dwt1/dotfiles/-/tree/master/.emacs.d.gnu
