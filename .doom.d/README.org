#+TITLE: My configuration of Emacs
#+STARTUP: showeverything
#+STARTUP: inlineimages
#+AUTHOR: Prutserdt

#+CAPTION: Doom Emacs
#+ATTR_HTML: :alt Doom Emacs :title Doom Emacs :align left
[[https://github.com/Prutserdt/dotfiles/raw/master/.doom.d/doom-emacs.png]]

* /home/icefly/.doom.d/Table Of Contents :toc:
- [[#about-this-config][About this config]]
- [[#initel][init.el]]
- [[#packagesel][packages.el]]
- [[#configel][config.el]]
- [[#todos][TODOs]]
  - [[#python-sourceblock][Python sourceblock]]
  - [[#change-font][Change font]]
  - [[#mu4e][MU4e]]
  - [[#flash-highlighting-yanked-text][Flash highlighting yanked text]]
- [[#credits][Credits]]

* About this config
This is my personal [[https://github.com/hlissner/doom-emacs][Doom Emacs]] config. Nothing much to see here. Just started this journey and learning [[https://www.gnu.org/software/emacs/][Emacs]] and [[https://en.wikipedia.org/wiki/Literate_programming][literate programming]] along the way. The Emacs Lisp files [[https://github.com/Prutserdt/dotfiles/blob/master/.doom.d/init.el][init.el]], [[https://github.com/Prutserdt/dotfiles/blob/master/.doom.d/packages.el][packages.el]] and [[https://github.com/Prutserdt/dotfiles/blob/master/.doom.d/config.el][config.el]] are generated from [[https://github.com/Prutserdt/dotfiles/blob/master/.doom.d/README.org][this README.org file]] by tangling in Emacs (Alt-x and typing: =org-babel-tangle=). Remember to run =doom sync= in the terminal after modifying it! (or M-x doom-reload, or SPC h r r within emacs)

* init.el
This file controls what Doom modules are enabled and what order they load in. Remember to tangle this README.org file and running =doom sync= after modifying it!

#+begin_src emacs-lisp :tangle init.el
;;; init.el -*- lexical-binding: t; -*-

;; NOTE This file is generated from the README.org file. Do not alter the
;; init.el directly and only modify the README.org file then Alt-x and type:
;; 'org-babel-tangle' in emacs and run 'doom sync' in the terminal.
;; Happy hacking :-)

(doom! :completion
       company           ; the ultimate code completion backend
       vertico           ; the search engine of the future
       :ui
       doom              ; what makes DOOM look the way it does
       doom-dashboard    ; a nifty splash screen for Emacs
       doom-quit         ; DOOM quit-message prompts when you quit Emacs
       (emoji +unicode)  ; รฐ
       hl-todo           ; highlight TODO/FIXME/NOTE/DEPRECATED/HACK/REVIEW
       modeline          ; snazzy, Atom-inspired modeline, plus API
       ophints           ; highlight the region an operation acts on
       (popup +defaults)   ; tame sudden yet inevitable temporary windows
       vc-gutter         ; vcs diff in the fringe
       vi-tilde-fringe   ; fringe tildes to mark beyond EOB
       workspaces        ; tab emulation, persistence & separate workspaces
       :editor
       (evil +everywhere); come to the dark side, we have cookies
       file-templates    ; auto-snippets for empty files
       fold              ; (nigh) universal code folding
       snippets          ; my elves. They type so I don't have to
       :emacs
       dired             ; making dired pretty [functional]
       electric          ; smarter, keyword-based electric-indent
       undo              ; persistent, smarter undo for your inevitable mistakes
       vc                ; version-control and :Emacs, sitting in a tree
       :checkers
       syntax            ; tasing you for every semicolon you forget
       :tools
       (eval +overlay)   ; run code, run (also, repls)
       lookup            ; navigate your code and its documentation
       lsp               ; M-x vscode
       magit             ; a git porcelain for Emacs
       :lang
       emacs-lisp        ; drown in parentheses
       markdown          ; writing docs for people to ignore
       (org +pretty)     ; organize your plain life in plain text
       (python +lsp
        +pyright)        ; beautiful is better than ugly
       sh                ; she sells {ba,z,fi}sh shells on the C xor
       :email
       (mu4e +org +gmail); TODO: this is not set up yet....
       :app
       :config
       (default +bindings +smartparens)
       )
#+end_src

The folowing options could be added to the init.el part that is listed above. Just copy/paste the section and uncomment it.

#+begin_src emacs-lisp

       ;; :completion
       ;;helm              ; the *other* search engine for love and life
       ;;ido               ; the other *other* search engine...
       ;;ivy               ; a search engine for love and life
       ;; :lang
       ;;julia             ; a better, faster MATLAB
       ;;kotlin            ; a better, slicker Java(Script)
       ;;latex             ; writing papers in Emacs has never been so fun
       ;;lean              ; for folks with too much to prove
       ;;ledger            ; be audit you can be
       ;;lua               ; one-based indices? one-based indices
       ;;erlang            ; an elegant language for a more civilized age
       ;;ess               ; emacs speaks statistics
       ;;factor
       ;;faust             ; dsp, but you get to keep your soul
       ;;fortran           ; in FORTRAN, GOD is REAL (unless declared INTEGER)
       ;;fsharp            ; ML stands for Microsoft's Language
       ;;fstar             ; (dependent) types and (monadic) effects and Z3
       ;;gdscript          ; the language you waited for
       ;;(go +lsp)         ; the hipster dialect
       ;;(haskell +lsp)    ; a language that's lazier than I am
       ;;hy                ; readability of scheme w/ speed of python
       ;;idris             ; a language you can depend on
       ;;json              ; At least it ain't XML
       ;;(java +lsp)       ; the poster child for carpal tunnel syndrome
       ;;javascript        ; all(hope(abandon(ye(who(enter(here))))))
       ;;nim               ; python + lisp at the speed of c
       ;;nix               ; I hereby declare "nix geht mehr!"
       ;;ocaml             ; an objective camel
       ;;php               ; perl's insecure younger brother
       ;;plantuml          ; diagrams for confusing people more
       ;;purescript        ; javascript, but functional
       ;;qt                ; the 'cutest' gui framework ever
       ;;racket            ; a DSL for DSLs
       ;;raku              ; the artist formerly known as perl6
       ;;rest              ; Emacs as a REST client
       ;;rst               ; ReST in peace
       ;;(ruby +rails)     ; 1.step {|i| p "Ruby is #{i.even? ? 'love' : 'life'}"}
       ;;rust              ; Fe2O3.unwrap().unwrap().unwrap().unwrap()
       ;;scala             ; java, but good
       ;;(scheme +guile)   ; a fully conniving family of lisps
       ;;sml
       ;;solidity          ; do you need a blockchain? No.
       ;;swift             ; who asked for emoji variables?
       ;;terra             ; Earth and Moon in alignment for performance.
       ;;web               ; the tubes
       ;;yaml              ; JSON, but readable
       ;;zig               ; C, but simpler
       ;; :email
       ;;(mu4e +org +gmail)
       ;;notmuch
       ;;(wanderlust +gmail)
       ;; :app
       ;;calendar
       ;;emms
       ;;everywhere        ; *leave* Emacs!? You must be joking
       ;;irc               ; how neckbeards socialize
       ;;(rss +org)        ; emacs as an RSS reader
       ;;twitter           ; twitter client https://twitter.com/vnought
       ;; :os
       ;;(:if IS-MAC macos)  ; improve compatibility with macOS
       ;; :config
       ;;literate

#+end_src

* packages.el
Here the packages are defined which should be installed. This is an addition to the already installed and loaded modules of init.el.

#+begin_src emacs-lisp :tangle packages.el

;; -*- no-byte-compile: t; -*-

;; NOTE This file is generated from the README.org file. Do not alter the
;; packages.el file directly and only modify the README.org file then Alt-x and type:
;; 'org-babel-tangle' in emacs and run 'doom sync' in the terminal. Happy hacking :-)

(require 'package)
(add-to-list 'package-archives
             '("melpa" . "https://melpa.org/packages/"))
(package-refresh-contents)
(package-initialize)

;; Disable the nose package. Not maintained and leading to :lang python error
(package! nose :disable t)

;; The email package MU for emacs
(package! mu4e)

;; Help finding the cursor
(package! beacon)

#+end_src

* config.el
The custom configurations are set here. For instance theme settings, image to the doom splash screen, transparency, relative numbering and email settings.

#+begin_src emacs-lisp :tangle config.el

;; NOTE This file is generated from the README.org file. Do not alter the
;; config.el directly and only modify the README.org file, then Alt-x and type:
;; 'org-babel-tangle' in emacs and run 'doom sync' in the terminal.
;; Happy hacking :-)

;; Evil Mode
(use-package evil
  :ensure t
  :config
)

;; Add this image to my splash screen
(setq fancy-splash-image "~/.doom.d/doom-emacs.png")

;; Style of line numbering, set to `relative' for relative number.
;; Or keycord: SPC t l, or SPC u SPC t l
(global-display-line-numbers-mode)
(setq display-line-numbers-type 'relative)

;; Restoring old Y behavior of VIM (yank the whole line)
(setq! evil-want-Y-yank-to-eol nil)

;; Add closing parenthesis of [{"'
(show-paren-mode 1)

;; Show the 80 column (Fill Column Indicator)
(global-display-fill-column-indicator-mode)

;; Change the theme
;;(setq doom-theme 'doom-moonlight)
;;(setq doom-theme 'doom-vibrant)
(setq doom-theme 'doom-material-dark)
;;(setq doom-theme 'doom-xcode)

;; Help to find the cursor by beacon blink
(beacon-mode 1)
(setq beacon-blink-duration 3)

;; Make the normal/insert/visual states more apparent by changing cursor:
(setq evil-normal-state-cursor '(box "tomato")
      evil-insert-state-cursor '(bar "white")
      evil-visual-state-cursor '(hollow "orange"))

;; Nice bullets instead of boring *. Requires (org +pretty)
(setq     org-superstar-headline-bullets-list '("โ" "โ" "โฟ" "โธ" "โ" ))

;; Transparency
(set-frame-parameter (selected-frame) 'alpha '(95 90))
(add-to-list 'default-frame-alist '(alpha 95 90))

;; use mu4e for e-mail in emacs
(setq mail-user-agent 'mu4e-user-agent)
(set-email-account!
 "transip"
 '((mu4e-sent-folder       . "/transip/Sent Mail")
   (mu4e-trash-folder      . "/transip/Bin")
   (smtpmail-smtp-user     . "walter@elffrink.nl"))
 t)
(setq mu4e-get-mail-command "mbsync transip"
      ;; get emails and index every 5 minutes
      mu4e-update-interval 300
	  ;; send emails with format=flowed
	  mu4e-compose-format-flowed t
	  ;; no need to run cleanup after indexing for gmail
	  mu4e-index-cleanup nil
	  mu4e-index-lazy-check t
      ;; more sensible date format
      mu4e-headers-date-format "%d.%m.%y")
;; FIXME: smtpmail werkt nog niet, onderstaande verbeteren....
;; tell message-mode how to send mail
(setq message-send-mail-function 'smtpmail-send-it)
;; if our mail server lives at smtp.example.org; if you have a local
;; mail-server, simply use 'localhost' here.
(setq smtpmail-smtp-server "smtp.transip.email")

#+end_src

* TODOs
Here is a list of things I want to improve in my Doom Emacs configuration.

** Python sourceblock
I want to add a Python sourceblock by (insert, <p TAB) and also add =:tangle *.py=.
https://orgmode.org/manual/Structure-Templates.html#Structure-Templates
https://www.reddit.com/r/emacs/comments/abygwc/if_you_pull_orgmode_from_0day_be_sure_to_check/
https://www.lucacambiaghi.com/vanilla-emacs/readme.html#h:934C85A9-D8DB-455F-A19C-570300047FD5
(add-to-list 'org-structure-template-alist '("py" . "src python"))
(setq new-structure-template-alist
        '(("py" . "src python :results output")
werkt nu niet....
;;(require 'org-tempo)
;;(add-to-list 'org-structure-template-alist '("py" . "src python"))
(setq new-structure-template-alist
        '(("py" . "src python :results output")
          ("ipy" . "src ipython :results output")
          ("el" . "src emacs-lisp")
          ("hs" . "src haskell")
          ("laeq" . "latex \n\\begin{equation} \\label{eq-sinh}\ny=\\sinh x\n\\end{equation}")
          ("sh" . "src sh")
          ("r" . "src R")
          ("js" . "src js")
          ("http" . "src http")
          ("ditaa" . "src ditaa :file")
          ("dot" . "src dot :file")
          ("rp" . "src R :results output graphics :file ")
          ("plantuml" . "src plantuml :file")
          ))

** Change font
Ik wil een ander font instellen. Hack font geeft problemen LIJKT het. Na een reboot is de tekst onleesbaar klein wat DENKik komt door onderstaande fontinstelling. Even kijken hoe ik dit
ga oplossen. Onderstaande in config.el wert niet:
=(set-frame-font "Hack 12" nil t)=

** MU4e
Is not yet properly configured.

** Flash highlighting yanked text
This is already out of the box in doom emacs. I want the flashing to last longer, about 1 second. The following line adition to config.el does NOT work:
=(setq hl-line-mode  5)=

* Credits
My configuration of Doom Emacs is partially based on these ones.
- :book: https://gitlab.com/zzamboni/dot-doom
- :book: https://gitlab.com/dwt1/dotfiles/-/tree/master/.emacs.d.gnu
