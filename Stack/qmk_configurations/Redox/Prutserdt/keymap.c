/* Free software, GNU General Public Licence, see http:.gnu.org/licences
 * This layout is experimental and not a finished product.  */

#include QMK_KEYBOARD_H

/* Make layers readable by naming them */
#define _QWERTY 0
#define _ARROWS 1
#define _NMBRS 2
#define _FUNC 3
#define _MOUSE 4
#define _NUMPAD 5

/* Custom keycodes */
enum custom_keycodes {
  QWERTY = SAFE_RANGE,
  ARROWS,
  NMBRS,
  FUNC,
  MOUSE,
  NUMPAD,
  FirmV,
  };

/* Send custom strings */
bool process_record_user(uint16_t keycode, keyrecord_t *record) {
  switch (keycode) {
  case FirmV:
    if (record->event.pressed) {
        SEND_STRING("Redox keyboard. Prutserdt firmware v0.97. More info: Prutserdt github");
    }
    break;
  }
  return true;
}

/* Use combos. Do not forget to add to rules.mk: COMBO_ENABLE = yes  */
enum combos {
  ER_ESC,
  RT_TAB,
  CV_CAPS,
  YU_HOME,
  NM_END,
  UI_PGUP,
  MCOM_PGDN,
  IO_LBRC,
  OP_RBRC,
  QW_GRV,
};
const uint16_t PROGMEM er_combo[] = {KC_E, KC_R, COMBO_END};
const uint16_t PROGMEM rt_combo[] = {KC_R, KC_T, COMBO_END};
const uint16_t PROGMEM cv_combo[] = {KC_C, KC_V, COMBO_END};
const uint16_t PROGMEM yu_combo[] = {KC_Y, KC_U, COMBO_END};
const uint16_t PROGMEM nm_combo[] = {KC_N, KC_M, COMBO_END};
const uint16_t PROGMEM ui_combo[] = {KC_U, KC_I, COMBO_END};
const uint16_t PROGMEM mcomm_combo[] = {KC_M, KC_COMM, COMBO_END};
const uint16_t PROGMEM io_combo[] = {KC_I, KC_O, COMBO_END};
const uint16_t PROGMEM op_combo[] = {KC_O, KC_P, COMBO_END};
const uint16_t PROGMEM qw_combo[] = {KC_Q, KC_W, COMBO_END};

combo_t key_combos[] = {
  [ER_ESC] = COMBO(er_combo, KC_ESC),
  [RT_TAB] = COMBO(rt_combo, KC_TAB),
  [CV_CAPS] = COMBO(cv_combo, KC_CAPS),
  [YU_HOME] = COMBO(yu_combo, KC_HOME),
  [NM_END] = COMBO(nm_combo, KC_END),
  [UI_PGUP] = COMBO(ui_combo, KC_PGUP),
  [MCOM_PGDN] = COMBO(mcomm_combo, KC_PGDN),
  [IO_LBRC] = COMBO(io_combo, KC_LBRC),
  [OP_RBRC] = COMBO(op_combo, KC_RBRC),
  [QW_GRV] = COMBO(qw_combo, KC_GRV),
};


const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

  [_QWERTY] = LAYOUT(
  // 0: QWERTY (qwerty layer, ctrl/gui/alt in home row and dynamic macro recording/recording stop/play buttons)
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                           ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
     _______,      _______,     _______,     _______,     _______,     _______,                                                 _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┐                       ┌─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     KC_Q,        KC_W,        KC_E,        KC_R,        KC_T,        _______,                          _______,  KC_Y,        KC_U,        KC_I,        KC_O,        KC_P,        _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┤                       ├─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     LSFT_T(KC_A),LCTL_T(KC_S),LGUI_T(KC_D),LALT_T(KC_F),KC_G,        _______,                          _______,   KC_H,       RALT_T(KC_J),RGUI_T(KC_K),RCTL_T(KC_L),RSFT_T(KC_SCLN),_______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┼─────────┐ ┌───────────┼─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     KC_Z,        KC_X,        KC_C,        KC_V,        KC_B,        _______,  _______,    _______,    _______,  KC_N,        KC_M,        KC_COMM,     KC_DOT,      KC_SLSH,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────┬───┴────┬───────┼─────────┼─────────┤ ├───────────┼─────────┼────────┬───┴────┬───────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     _______,              TT(4),      LT(1,KC_BSPC),LT(3,KC_DEL),LT(5,KC_ENT), LT(2,KC_SPC),    _______,         _______,     _______,     _______,     _______
  //└────────────┴────────────┴────────────┴────────────┘        └────────┘       └─────────┴─────────┘ └───────────┴─────────┘        └────────┘       └────────────┴────────────┴────────────┴────────────┘
  ),

  [_ARROWS ] = LAYOUT(
  // 1: ARROWS (arrow keys at hjkl, capslock, Firmware info, RGB toggle  and some media keys. The Function keys are duplication of some F numbers, and used in my QTILE configuration)
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                           ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
     _______,     _______,     _______,     _______,     _______,     _______,                                                 _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┐                       ┌─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     KC_F16,      KC_F17,      KC_F18,      KC_PSCR,     KC_BRID,     _______,                          _______,  KC_BRIU,     KC_CALC,     KC_MUTE,     KC_VOLD,     KC_VOLU,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┤                       ├─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     _______,     _______,     _______,     _______,                          _______,  KC_LEFT,     KC_DOWN,     KC_UP,       KC_RIGHT,    _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┼─────────┐ ┌───────────┼─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     KC_CAPS,     FirmV,       RGB_TOG,     _______,  _______,    _______,    _______,  KC_HOME,     KC_PGDN,     KC_PGUP,     KC_END,     KC_INS,       _______,
  //├────────────┼────────────┼────────────┼────────────┼────────┬───┴────┬───────┼─────────┼─────────┤ ├───────────┼─────────┼────────┬───┴────┬───────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     _______,              _______,         _______,  _______,    _______,    _______,           _______,         _______,     _______,     _______,     _______
  //└────────────┴────────────┴────────────┴────────────┘        └────────┘       └─────────┴─────────┘ └───────────┴─────────┘        └────────┘       └────────────┴────────────┴────────────┴────────────┘
  ),

  [_NMBRS] = LAYOUT(
  // 2: NMBRS (number keys in home row, symbols in qwerty row)
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                           ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
     _______,     _______,     _______,     _______,     _______,     _______,                                                 _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┐                       ┌─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     KC_EXLM,     KC_AT,       KC_HASH,     KC_DLR,      KC_PERC,     _______,                          _______,  KC_CIRC,     KC_AMPR,     KC_ASTR,     KC_LPRN,     KC_RPRN,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┤                       ├─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     KC_1,        KC_2,        KC_3,        KC_4,        KC_5,        _______,                          _______,  KC_6,        KC_7,        KC_8,        KC_9,        KC_0,        _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┼─────────┐ ┌───────────┼─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     KC_GRV,      KC_BSLS,     KC_QUOT,     KC_EQL,      KC_MINS,     _______,  _______,    _______,    _______,  _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────┬───┴────┬───────┼─────────┼─────────┤ ├───────────┼─────────┼────────┬───┴────┬───────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     _______,              _______,         _______,  _______,    _______,    _______,           _______,         _______,     _______,     _______,     _______
  //└────────────┴────────────┴────────────┴────────────┘        └────────┘       └─────────┴─────────┘ └───────────┴─────────┘        └────────┘       └────────────┴────────────┴────────────┴────────────┘
  ),

  [_FUNC] = LAYOUT(
  // 3: FUNC (Function keys, home/pgup/pgdn/end on hjkl and RGB)
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                           ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
     _______,     _______,     _______,     _______,     _______,     _______,                                                 _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┐                       ┌─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     KC_F1,       KC_F2,       KC_F3,       KC_F4,       KC_F5,       _______,                          _______,  KC_F6,       KC_F7,       KC_F8,       KC_F9,       KC_F10,      _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┤                       ├─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     KC_F11,      KC_F12,      KC_F13,      KC_F14,      KC_F15,      _______,                          _______,  KC_F16,      KC_F17,      KC_F18,      KC_F19,      KC_F20,      _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┼─────────┐ ┌───────────┼─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     KC_F21,      KC_F22,      KC_F23,      KC_F24,      _______,     _______,  _______,    _______,    _______,  _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────┬───┴────┬───────┼─────────┼─────────┤ ├───────────┼─────────┼────────┬───┴────┬───────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     _______,              _______,         _______,  _______,    _______,    _______,           _______,         _______,     _______,     _______,     _______
  //└────────────┴────────────┴────────────┴────────────┘        └────────┘       └─────────┴─────────┘ └───────────┴─────────┘        └────────┘       └────────────┴────────────┴────────────┴────────────┘
  ),

  [_MOUSE] = LAYOUT(
  // 4: MOUSE (Mouse navigation/scrolling/buttons/speed)
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                           ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
     _______,     _______,     _______,     _______,     _______,     _______,                                                 _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┐                       ┌─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     _______,     _______,     _______,     KC_WH_U,                          KC_BTN5,  _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┤                       ├─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     _______,     _______,     _______,     KC_WH_D,                          KC_BTN4,  KC_MS_L,     KC_MS_D,     KC_MS_U,     KC_MS_R,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┼─────────┐ ┌───────────┼─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     DM_PLY1,     DM_PLY2,     _______,     _______,     KC_ACL0,     KC_ACL1,  KC_ACL2,    _______,    _______,  _______,     KC_NO,       DM_RSTP,     DM_REC2,     DM_REC1,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────┬───┴────┬───────┼─────────┼─────────┤ ├───────────┼─────────┼────────┬───┴────┬───────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     _______,              _______,         _______,  _______,    KC_BTN1,    KC_BTN2,           KC_BTN3,         _______,     _______,     _______,     _______
  //└────────────┴────────────┴────────────┴────────────┘        └────────┘       └─────────┴─────────┘ └───────────┴─────────┘        └────────┘       └────────────┴────────────┴────────────┴────────────┘
  ),

  [_NUMPAD] = LAYOUT(
  // 5: NUMPAD (Numpad)
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                           ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
     _______,     _______,     _______,     _______,     _______,     _______,                                                 _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┐                       ┌─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     KC_GRV,      _______,     KC_ESC,      _______,     KC_TAB,      _______,                          _______,  _______,     KC_7,        KC_8,        KC_9,        _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┤                       ├─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     _______,     KC_ESC,      _______,     _______,                          _______,  _______,     KC_4,        KC_5,        KC_6,        _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼─────────┼─────────┐ ┌───────────┼─────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     KC_CAPS,     _______,     _______,     _______,  _______,    _______,    _______,  _______,     KC_1,        KC_2,        KC_3,        _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────┬───┴────┬───────┼─────────┼─────────┤ ├───────────┼─────────┼─────────┬──┴─────┬──────┼────────────┼────────────┼────────────┼────────────┤
     _______,     _______,     _______,     _______,              _______,         _______,  _______,    _______,    _______,            _______,        KC_0,        KC_DOT,      _______,     _______
  //└────────────┴────────────┴────────────┴────────────┘        └────────┘       └─────────┴─────────┘ └───────────┴─────────┘         └────────┘      └────────────┴────────────┴────────────┴────────────┘
  )
};

/* Change LED colors depending on the layer. */
layer_state_t layer_state_set_user(layer_state_t state) {
    switch (get_highest_layer(state)) {
    case _QWERTY:
        rgblight_setrgb (0x66, 0x00, 0x00); /* Red */
        break;
    case _ARROWS:
        rgblight_setrgb (0x66, 0x00, 0x33); /* Pink */
        break;
    case _NMBRS:
        rgblight_setrgb (0xFF, 0xD9, 0x00); /* Yellow */
        break;
    case _FUNC:
        rgblight_setrgb (0x7A, 0x00, 0xFF); /* Purple */
        break;
    case _MOUSE:
        rgblight_setrgb (0xFF, 0xFF, 0x00); /* Yellow */
        break;
    case _NUMPAD:
        rgblight_setrgb (0xFF, 0x00, 0xFF); /* Magenta */
        break;
    default: /* For any other layers, or the default layer */
        rgblight_setrgb (0xFF, 0x00, 0x00); /* Red */
        break;
    }
  return state;
};
